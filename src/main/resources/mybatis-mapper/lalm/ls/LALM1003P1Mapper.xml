<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.auc.lalm.ls.service.Impl.LALM1003P1Mapper">

	<insert id="LALM1003P1_insEtc" parameterType="hashMap">
		<selectKey keyProperty="sra_indv_amnno" resultType="string" order="BEFORE">
			SELECT DECODE(#{auc_obj_dsc}, '5', '06', '6', '04', '99')||TO_CHAR(SYSDATE, 'YYYYMMDD')||LPAD(NVL(MAX(TO_NUMBER(SUBSTR(SRA_INDV_AMNNO, -5))) + 1, 1), 5, '0') AS sra_indv_amnno
				FROM TB_LA_IS_MM_INDV
				WHERE NA_BZPLC = #{ss_na_bzplc}
				AND SRA_SRS_DSC = DECODE(#{auc_obj_dsc}, '5', '06', '6', '04', '99')
				AND SRA_INDV_AMNNO LIKE DECODE(#{auc_obj_dsc}, '5', '06', '6', '04', '99')||TO_CHAR(SYSDATE, 'YYYYMMDD')||'%'
		</selectKey>
		INSERT  INTO TB_LA_IS_MH_SOG_COW (
			NA_BZPLC                               		/* 경제통합사업장코드         */
		    , AUC_OBJ_DSC                            	/* 경매대상구분코드           */
		    , AUC_DT                                 	/* 경매일자                   */
		    , OSLP_NO                                	/* 원표번호                   */
		    , LED_SQNO                               	/* 원장일련번호               */
		    , FHS_ID_NO                              	/* 농가식별번호               */
		    , FARM_AMNNO                             	/* 농장관리번호               */
		    , SOG_NA_TRPL_C                          	/* 출하경제통합거래처코드     */
		    , RC_DT                                  	/* 접수일자                   */
		    , SRA_SRS_DSC                            	/* 축산축종구분코드           */
		    , SRA_INDV_AMNNO                         	/* 축산개체관리번호           */
		    , COW_SOG_WT                             	/* 우출하중량                 */
			, RE_PRODUCT_1								/* 50KG 이상 두수 */
			, RE_PRODUCT_2								/* 20KG 이상 두수 */
			, RE_PRODUCT_3								/* 20KG 미만 두수 */
			, RE_PRODUCT_4								/* 임시 */
		    , FIR_LOWS_SBID_LMT_AM                   	/* 최초최저낙찰한도금액       */
		    , LOWS_SBID_LMT_AM                       	/* 최저낙찰한도금액           */
		    , SEL_STS_DSC                            	/* 판매상태구분코드           */
		    , LWPR_CHG_NT                            	/* 최저가변경횟수             */
		    , VACN_DT                                	/* 예방접종일자               */
		    , PPGCOW_FEE_DSC                         	/* 번식우수수료구분코드       */
		    , SRA_PDMNM                              	/* 축산생산자명               */
		    , SRA_PD_RGNNM                           	/* 축산생산지역명             */
		    , RMK_CNTN                               	/* 비고내용                   */
		    , AUC_PRG_SQ                             	/* 경매진행순서               */
		    , DEL_YN                                 	/* 삭제여부                   */
		    , TMS_YN                                 	/* 전송여부                   */
		    , MODL_NO                                   /* 거치대 번호                */
			, AUC_YN         							/* 경매 여부                 */
		    , FSRG_DTM                               	/* 최초등록일시               */
		    , FSRGMN_ENO                             	/* 최초등록자개인번호         */
		    , LSCHG_DTM                              	/* 최종변경일시               */
		    , LS_CMENO                               	/* 최종변경자개인번호         */
		)VALUES(
			#{ss_na_bzplc}                        		/* 경제통합사업장코드         */
			, #{auc_obj_dsc}             				/* 경매대상구분코드           */
			, #{auc_dt}              					/* 경매일자                   */
			, #{oslp_no}                           		/* 원표번호                   */
			, 1                                        	/* 원장일련번호               */
			, #{fhs_id_no}               				/* 농가식별번호               */
			, #{farm_amnno}              				/* 농장관리번호               */
			, NULL           							/* 출하경제통합거래처코드     */
			, #{rc_dt}                    				/* 접수일자                   */
			, DECODE(#{auc_obj_dsc}, '5', '06', '6', '04', '01')	/* 축산축종구분코드 */
			, #{sra_indv_amnno}                         /* 축산개체관리번호           */
			, #{cow_sog_wt}                             /* 우출하중량                 */
			, #{re_product_1}							/* 50KG 이상 두수 */
			, #{re_product_2}							/* 20KG 이상 두수 */
			, #{re_product_3}							/* 20KG 미만 두수 */
			, #{re_product_4}							/* 임시 */
			, #{lows_sbid_lmt_am}                       /* 최초최저낙찰한도금액       */
			, #{lows_sbid_lmt_am}                       /* 최저낙찰한도금액           */
			, '11'                                      /* 판매상태구분코드           */
			, 0	                                        /* 최저가변경횟수             */
		    , #{vacn_dt}                                /* 예방접종일자               */
			, '5'									    /* 번식우수수료구분코드       */
			, #{ftsnm}							    	/* 축산생산자명               */
			, #{dongup}                          		/* 축산생산지역명             */
			, #{rmk_cntn}                               /* 비고내용                   */
			, #{auc_prg_sq}                             /* 경매진행순서               */
			, '0'                                       /* 삭제여부                   */
			, '0'                                       /* 전송여부                   */
			, #{modl_no}                	        	/* 거치대 번호                */
			, '0'                                       /* 경매 여부                  */
			, SYSDATE				                    /* 최초등록일시               */
			, #{ss_userid}			                    /* 최초등록자개인번호         */
			, SYSDATE				                    /* 최종변경일시               */
			, #{ss_userid}	                            /* 최종변경자개인번호         */
		)
	</insert>
	
	<insert id="LALM1003P1_insIndv" parameterType="hashMap">
        insert into tb_la_is_mm_indv
         (
            na_bzplc									/* 경제통합사업장코드 */
          , sra_indv_amnno								/* 축산개체관리번호   */
          , sra_srs_dsc									/* 축산축종구분코드   */
          , fhs_id_no									/* 농가식별번호       */
          , farm_amnno									/* 농장관리번호       */
          , birth
          , mcow_dsc
          , kpn_no
          , indv_sex_c									/* 개체성별코드       */
          , mcow_sra_indv_amnno
          , matime
          , sra_indv_pasg_qcn
          , indv_id_no									/* 개체식별번호       */
          , sra_indv_brdsra_rg_no
          , rg_dsc										/* 등록구분코드       */
          , anw_yn										/* 한우종합등록여부   */
          , grfa_sra_kpn_no 
          , grfa_sra_indv_eart_no 
          , grmo_sra_indv_eart_no 
          , mtgrfa_sra_kpn_no 
          , mtgrfa_sra_indv_eart_no 
          , mtgrmo_sra_indv_eart_no
          , fsrg_dtm
          , fsrgmn_eno
          , lschg_dtm
          , ls_cmeno
         ) values
         (
             #{ss_na_bzplc}
           , #{sra_indv_amnno}
		   <choose>
				<when test='auc_obj_dsc == "5"'>		  	 	/* 축산축종구분코드	 */
					, '06'
				</when>
				<when test='auc_obj_dsc == "6"'>
					, '04'
				</when>
				<otherwise>
					, '01'
				</otherwise>
		   </choose>
           , #{fhs_id_no}
           , #{farm_amnno}
           , NULL
           , NULL
           , NULL
           , #{indv_sex_c}
           , NULL
           , NULL
           , NULL
           , NULL
           , NULL
           , NULL
           , '0'
           , NULL
           , NULL
           , NULL
           , NULL
           , NULL
           , NULL
           , SYSDATE
           , #{ss_userid}
           , SYSDATE
           , #{ss_userid}
         );
    </insert>
</mapper>




		









