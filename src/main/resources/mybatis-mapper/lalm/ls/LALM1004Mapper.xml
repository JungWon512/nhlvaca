<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.auc.lalm.ls.service.Impl.LALM1004Mapper">

	<!-- 출장내역 상세 조회 -->
	<select id="LALM1004_selList" resultType="hashMap">
		SELECT A.NA_BZPLC                        /* 경제통합사업장코드                   	*/
			, A.AUC_OBJ_DSC                     /* 경매대상구분코드                    	*/
			, A.AUC_DT                          /* 경매일자                          	*/
			, A.OSLP_NO                         /* 원표번호                          	*/
			, A.LED_SQNO                        /* 원장일련번호                       	*/
			, A.FHS_ID_NO                       /* 농가식별번호                       	*/
			, A.FARM_AMNNO                      /* 농장관리번호                       	*/
			, A.SOG_NA_TRPL_C                   /* 출하경제통합거래처코드               	*/
			, A.VHC_SHRT_C                      /* 차량단축코드                      	*/
			, A.RC_DT                           /* 접수일자                          	*/
			, A.TRMN_AMNNO                      /* 거래인관리번호                      	*/
			, A.LVST_AUC_PTC_MN_NO              /* 가축경매참여자번호                   	*/
			, A.SRA_SRS_DSC                     /* 축산축종구분코드                    	*/
			, A.SRA_INDV_AMNNO                  /* 축산개체관리번호                     	*/
			, A.COW_SOG_WT                      /* 우출하중량                        	*/
			, A.FIR_LOWS_SBID_LMT_AM            /* 최초최저낙찰한도금액                	*/
			, A.LOWS_SBID_LMT_AM                /* 최저낙찰한도금액                   	*/
			, A.SRA_SBID_UPR                    /* 축산낙찰단가                       	*/
			, A.SRA_SBID_AM                     /* 축산낙찰금액                       	*/
			, A.SEL_STS_DSC                     /* 판매상태구분코드                    	*/
			, A.BRCL_ISP_CTFW_SMT_YN            /* 브루셀라검사증명서제출여부           	*/
			, A.BRCL_ISP_DT                     /* 브루셀라검사일자                    	*/
			, A.LWPR_CHG_NT                     /* 최저가변경횟수                     	*/
			, A.VACN_DT                         /* 예방접종일자                       	*/
			, A.VACN_ORDER                      /* 예방접종일자                       	*/
			, A.LVST_MKT_TRPL_AMNNO             /* 가축시장거래처관리번호                	*/
			, A.MT12_OVR_YN                     /* 12개월이상여부                     	*/
			, A.PPGCOW_FEE_DSC                  /* 번식우수수료구분코드                 	*/
			, A.PRNY_JUG_YN                     /* 임신감정여부                       	*/
			, A.PRNY_YN                         /* 임신여부                          	*/
			, A.NCSS_JUG_YN                     /* 괴사감정여부                       	*/
			, A.NCSS_YN                         /* 괴사여부                          	*/
			, A.TRPCS_PY_YN                     /* 운송비지급여부                      	*/
			, A.SRA_TRPCS                       /* 축산운송비                         	*/
			, A.SRA_PYIVA                       /* 축산납입출자금                     	*/
			, A.SRA_FED_SPY_AM                  /* 축산사료공급금액                    	*/
			, A.TD_RC_CST                       /* 당일접수비용                       	*/
			, A.MT12_OVR_FEE                    /* 12개월이상수수료 필드 없음          	*/
			, A.AFISM_MOD_DT                    /* 인공수정일자                       	*/
			, A.PRNY_MTCN                       /* 임신개월수                        	*/
			, A.AFISM_MOD_CTFW_SMT_YN           /* 인공수정증명서제출여부                	*/
			, A.RMHN_YN                         /* 제각여부                          	*/
			, A.SRA_PDMNM                       /* 축산생산자명                     	*/
			, A.SRA_PD_RGNNM                    /* 축산생산지역명                      	*/
			, A.RMK_CNTN                        /* 비고내용                          	*/
			, A.AUC_PRG_SQ                      /* 경매진행순서                      	*/
			, A.DEL_YN                          /* 삭제여부                          	*/
			, A.TMS_YN                          /* 전송여부                          	*/
			, A.SOGMN_C
			, A.AUC_YN							/* 경매진행상태                       	*/
			, B.FTSNM                           /* 농가명                           	*/
			, B.OHSE_TELNO                      /* 자택전화번호                        	*/
			, B.CUS_MPNO                        /* 고객휴대전화번호                    	*/
			, B.ZIP                             /* 우편번호                          	*/
			, B.DONGUP                          /* 동이상주소                         	*/
			, B.DONGBW                          /* 동이하주소                         	*/
			, B.MACO_YN AS IO_SOGMN_MACO_YN     /* 출하자조합원여부                    	*/
			, C.VHC_DRV_CAFFNM                  /* 수송자명                          	*/
			, D.INDV_ID_NO                      /* 개체식별번호                       	*/
			, D.MCOW_DSC                        /* 어미구분코드                        	*/
			, D.MCOW_SRA_INDV_AMNNO             /* 어미소축산개체관리번호                	*/
			, TRIM(D.KPN_NO) AS KPN_NO          /* KPN번호                         	*/
			, D.SRA_INDV_PASG_QCN               /* 축산개체계대차수                 	 	*/
			, D.INDV_SEX_C                      /* 개체성별코드                     	*/
			, D.BIRTH                           /* 생년월일                         	*/
			, D.SRA_INDV_BRDSRA_RG_NO           /* 축산개체종축등록번호                   */
			, D.RG_DSC                          /* 등록구분코드                      	*/
			, D.MATIME                          /* 산차                            	*/
			, E.SRA_MWMNNM                      /* 축산중도매인명                      	*/
			, E.MACO_YN AS IO_MWMN_MACO_YN      /* 중도매인조합원여부                   	*/
			, TRIM(A.MOD_KPN_NO) AS MOD_KPN_NO  /* 수정kpn				         	*/
			, A.DDL_QCN			   			    /* 일괄경매 마감차수		            	*/
			, A.FEE_CHK_YN                      /* 출하수수료수기적용여부               	*/
			, A.BLOOD_AM		                /* 혈통수수료	                       	*/
			, A.SELFEE_CHK_YN                   /* 판매수수료수기적용여부                	*/
			, B.SRA_FARM_ACNO	                /* 계좌정보                          	*/
			, A.FEE_CHK_YN_FEE                  /* 출하수수료수기등록                   	*/
			, A.SELFEE_CHK_YN_FEE               /* 판매수수료수기등록                   	*/
			, A.DNA_YN                          /* 친자검사결과                        	*/
			, NVL(B.SRA_FED_SPY_YN, 0) AS SRA_FED_SPY_YN         /* 사료미사용여부                      	*/
			, A.BRANDNM
			, A.PDA_ID                          /* 수의사구분                          */
			, A.DNA_YN_CHK                      /* 친자검사여부                        	*/
			, A.BOVINE_DT                       /* 우결핵검사일                        	*/
			, A.BOVINE_RSLTNM                   /* 우결핵검사                        	*/
			, A.RE_PRODUCT_1                    /* 유전능력 냉도체중                    	*/
			, A.RE_PRODUCT_1_1                  /* 유전능력 냉도체중 등급                	*/
			, A.RE_PRODUCT_2                    /* 유전능력 배최장근단면적                	*/
			, A.RE_PRODUCT_2_1                  /* 유전능력 배최장근단면적 등급           	*/
			, A.RE_PRODUCT_3                    /* 유전능력 등지방두께                   	*/
			, A.RE_PRODUCT_3_1                  /* 유전능력 등지방두께 등급               	*/
			, A.RE_PRODUCT_4                    /* 유전능력 근내지방도                   	*/
			, A.RE_PRODUCT_4_1                  /* 유전능력 근내지방도 등급               	*/
			, A.EPD_YN                          /* 고능력여부                         	*/
			, A.RE_PRODUCT_11                   /* 유전능력 냉도체중           	- 모개체  */
			, A.RE_PRODUCT_11_1                 /* 유전능력 냉도체중 등급        	- 모개체  */
			, A.RE_PRODUCT_12                   /* 유전능력 배최장근단면적       	- 모개체  */
			, A.RE_PRODUCT_12_1                 /* 유전능력 배최장근단면적 등급   	- 모개체  */
			, A.RE_PRODUCT_13                   /* 유전능력 등지방두께          	- 모개체  */
			, A.RE_PRODUCT_13_1                 /* 유전능력 등지방두께 등급     	- 모개체  */
			, A.RE_PRODUCT_14                   /* 유전능력 근내지방도          	- 모개체  */
			, A.RE_PRODUCT_14_1                 /* 유전능력 근내지방도 등급     	- 모개체	*/
			, A.SPAY_YN                         /* 난소적출 여부                       	*/
			, TRIM(A.CASE_COW) AS CASE_COW
			, A.FED_SPY_YN                      /* 전이용사료여부                      	*/
			, A.AMNNO                           /* 정산자거래인번호                    	*/
			, F.SRA_MWMNNM AS AMNNM             /* 정산자거래인명                    	*/
			, A.MODL_NO                         /* 거치대번호                       	*/
			, A.BRCL_ISP_RZT_C                  /* 브루셀라접종여부 0:수기 1:음성 2:양성 9:미접종 */
			, A.BDHT_VAL					    /* 체고                       	*/
			, A.BDLN_VAL                        /* 체장                       	*/
		FROM TB_LA_IS_MH_SOG_COW A

		LEFT OUTER JOIN TB_LA_IS_MM_VHC C
				ON  C.NA_BZPLC      = A.NA_BZPLC
				AND C.VHC_SHRT_C    = A.VHC_SHRT_C

		LEFT OUTER JOIN TB_LA_IS_MM_MWMN    E
				ON  A.NA_BZPLC      = E.NA_BZPLC
				AND A.TRMN_AMNNO    = E.TRMN_AMNNO
				
		LEFT OUTER JOIN TB_LA_IS_MM_MWMN    F
				ON  A.NA_BZPLC      = F.NA_BZPLC
				AND A.AMNNO         = F.TRMN_AMNNO

			, TB_LA_IS_MM_FHS     B
			, TB_LA_IS_MM_INDV    D

		WHERE A.NA_BZPLC         = #{ss_na_bzplc}
			AND A.AUC_OBJ_DSC    = #{hdn_auc_obj_dsc}
			AND A.AUC_DT         = #{hdn_auc_dt}
			AND A.OSLP_NO        = #{hdn_oslp_no}
			AND A.LED_SQNO       = '1'

			AND B.NA_BZPLC       = A.NA_BZPLC
			AND B.FHS_ID_NO      = A.FHS_ID_NO
			AND B.FARM_AMNNO     = A.FARM_AMNNO

			AND A.NA_BZPLC       = D.NA_BZPLC
			AND A.SRA_SRS_DSC    = D.SRA_SRS_DSC
			AND A.SRA_INDV_AMNNO = D.SRA_INDV_AMNNO
	</select>

	<!-- 수수료 정보 조회 -->
	<select id="LALM1004_selFee" resultType="hashMap">
		SELECT
			A.NA_BZPLC													/* 경제통합사업장코드			*/
			, A.APL_DT													/* 적용일자				*/
			, A.AUC_OBJ_DSC												/* 경매대상구분코드			*/
			, A.FEE_RG_SQNO												/* 수수료등록일련번호			*/
			, A.NA_FEE_C												/* 경제통합수수료코드			*/
			, A.SRA_FEENM												/* 축산수수료명				*/
			, A.JNLZ_BSN_DSC											/* 분개업무구분코드			*/
			, A.SRA_NA_FEE_C											/* 축산경제통합수수료코드		*/
			, A.FEE_APL_OBJ_C											/* 수수료적용대상코드			*/
			, A.AM_RTO_DSC												/* 금액비율구분코드			*/
			, A.SGNO_PRC_DSC											/* 단수처리구분코드			*/
			, A.MACO_FEE_UPR											/* 조합원수수료단가			*/
			, A.NMACO_FEE_UPR											/* 비조합원수수료단가			*/
			, A.ANS_DSC													/* 가감구분코드				*/
			, A.SBID_YN													/* 낙찰여부				*/
			, A.PPGCOW_FEE_DSC											/* 번식우수수료구분코드		*/
			, A.DEL_YN													/* 삭제여부				*/
			, A.FSRG_DTM												/* 최초등록일시				*/
			, A.FSRGMN_ENO												/* 최초등록자개인번호			*/
			, A.LSCHG_DTM												/* 최종변경일시				*/
			, A.LS_CMENO												/* 최종변경자개인번호			*/
			, 0 AS SRA_TR_FEE											/* 축산거래수수료			*/
			, A.ST_SOG_WT												/* 중량하한				*/
			, A.ED_SOG_WT												/* 중량상한				*/
		FROM  TB_LA_IS_MH_FEE A
		WHERE A.NA_BZPLC		= #{ss_na_bzplc}							/* 경제통합사업장코드			*/
			AND A.AUC_OBJ_DSC	= #{auc_obj_dsc}							/* 경매대상구분코드			*/
			AND A.APL_DT		= (SELECT MAX(APL_DT)
									FROM  TB_LA_IS_MH_FEE
									WHERE NA_BZPLC 			= #{ss_na_bzplc}			/* 경제통합사업장코드			*/
										AND AUC_OBJ_DSC		= #{auc_obj_dsc}			/* 경매대상구분코드			*/
										AND APL_DT			<![CDATA[<=]]> #{auc_dt}	/* 적용일자				*/
										AND DEL_YN			= '0')						/* 적용일자				*/
			AND A.DEL_YN      = '0' 													/* 삭제여부				*/
			AND '1' = ( CASE WHEN A.AUC_OBJ_DSC IN ( '1', '2', '3' ) OR NVL(A.JNLZ_BSN_DSC, '2') = '2' THEN '1'
							WHEN NVL(#{cow_sog_wt}, 0) <![CDATA[>=]]> A.ST_SOG_WT AND NVL(#{cow_sog_wt}, 0) <![CDATA[<]]> A.ED_SOG_WT THEN '1'
							ELSE '0'
						END)															/* 중량 적용 구간 */
	</select>

	<!-- 경매내역 저장 전 상태 변경 여부 조회 -->
	<select id="LALM1004_selStsDsc" resultType="hashMap">
			SELECT SEL_STS_DSC
			FROM TB_LA_IS_MH_SOG_COW
			WHERE NA_BZPLC = #{ss_na_bzplc}
				AND  OSLP_NO         = #{oslp_no} 
				AND AUC_OBJ_DSC  = #{auc_obj_dsc} 
				AND AUC_DT = #{auc_dt}
	</select>

	<!-- 축산개체 관리번호 -->
	<select id="LALM1004_selIndvAmnno" resultType="hashMap">
		SELECT SRA_INDV_AMNNO
		FROM  TB_LA_IS_MH_SOG_COW
		WHERE NA_BZPLC          = #{ss_na_bzplc}				/* 경제통합사업장코드	*/
			AND AUC_DT          = #{auc_dt}						/* 경매				   */
			AND SRA_SRS_DSC     = #{sra_srs_dsc}				/* 축산축종구분코드		*/
			AND SRA_INDV_AMNNO  = #{re_indv_no}					/* 축산개체관리번호		*/
	</select>

	<select id="LALM1004_selVoslpNo" resultType="hashMap">
			SELECT
				NVL(MAX(OSLP_NO)+1,1)  AS V_OSLP_NO
		FROM  TB_LA_IS_MH_SOG_COW
		WHERE NA_BZPLC        = #{ss_na_bzplc}					/* 경제통합사업장코드		*/
			AND AUC_DT          = #{auc_dt}					/* 이월일자			*/
	</select>

	<!-- 경매번호 중복 체크 -->
	<select id="LALM1004_selAucPrg" resultType="hashMap">
		SELECT  AUC_PRG_SQ                         /* 경매순번                   */
		  FROM  TB_LA_IS_MH_SOG_COW
		 WHERE  NA_BZPLC       = #{ss_na_bzplc}    /* 경제통합사업장코드         */
		   AND  AUC_DT         = #{auc_dt}           /* 경매일자                   */
		   AND  AUC_OBJ_DSC    = #{auc_obj_dsc}      /* 경매대상                   */
		   AND  AUC_PRG_SQ     = #{auc_prg_sq}       /* 경매번호                   */
	</select>

	<!-- 출하주 이름으로 농가/농장식별번호 조회 : 엑셀업로드 사용 -->
	<select id="LALM1004_selFtsnm" resultType="hashMap">
		SELECT FHS_ID_NO								  /* 농가식별번호               */
			  , FARM_AMNNO                      		  /* 농장식별코드               */
			  , DONGUP									  /* 동이상주소                 */
		  FROM  TB_LA_IS_MM_FHS
		 WHERE  NA_BZPLC		= #{ss_na_bzplc}             /* 경제통합사업장코드         */
		   AND  FTSNM			= #{ftsnm}
		   AND  FHS_ID_NO like 'G%'
	</select>

	<!-- 출장 정보 조회 -->
	<select id="LALM1004_selSogCow" resultType="hashMap">
		SELECT
			NA_BZPLC
			, AUC_OBJ_DSC
			, AUC_DT
			, OSLP_NO
			, LED_SQNO
			, FHS_ID_NO
			, FARM_AMNNO
			, SOG_NA_TRPL_C
			, VHC_SHRT_C
			, RC_DT
			, TRMN_AMNNO
			, LVST_AUC_PTC_MN_NO
			, SRA_INDV_AMNNO
			, SRA_SRS_DSC
			, COW_SOG_WT
			, FIR_LOWS_SBID_LMT_AM
			, LOWS_SBID_LMT_AM
			, SRA_SBID_AM
			, SRA_SBID_UPR
			, SEL_STS_DSC
			, BRCL_ISP_CTFW_SMT_YN
			, BRCL_ISP_DT
			, LWPR_CHG_NT
			, VACN_DT
			, VACN_ORDER
			, LVST_MKT_TRPL_AMNNO
			, MT12_OVR_YN
			, PPGCOW_FEE_DSC
			, PRNY_JUG_YN
			, PRNY_YN
			, NCSS_JUG_YN
			, NCSS_YN
			, TRPCS_PY_YN
			, SRA_TRPCS
			, SRA_PYIVA
			, SRA_FED_SPY_AM
			, TD_RC_CST
			, MT12_OVR_FEE
			, AFISM_MOD_DT
			, PRNY_MTCN
			, AFISM_MOD_CTFW_SMT_YN
			, RMHN_YN
			, SRA_PDMNM
			, SRA_PD_RGNNM
			, RMK_CNTN
			, AUC_PRG_SQ
			, TMS_YN
			, DEL_YN
			, AUC_YN
			, MOD_KPN_NO
			, DDL_QCN
			, SOGMN_C
			, FEE_CHK_YN
			, SELFEE_CHK_YN
			, FEE_CHK_YN_FEE
			, SELFEE_CHK_YN_FEE
			, BLOOD_AM
			, DNA_YN
			, BRANDNM
			, PDA_ID
			, DNA_YN_CHK
			, BOVINE_DT
			, BOVINE_RSLTNM
			, RE_PRODUCT_1
			, RE_PRODUCT_1_1
			, RE_PRODUCT_2
			, RE_PRODUCT_2_1
			, RE_PRODUCT_3
			, RE_PRODUCT_3_1
			, RE_PRODUCT_4
			, RE_PRODUCT_4_1
			, EPD_YN
			, RE_PRODUCT_11
			, RE_PRODUCT_11_1
			, RE_PRODUCT_12
			, RE_PRODUCT_12_1
			, RE_PRODUCT_13
			, RE_PRODUCT_13_1
			, RE_PRODUCT_14
			, RE_PRODUCT_14_1
			, SPAY_YN
			, CASE_COW
			, FSRG_DTM
			, FSRGMN_ENO
			, LSCHG_DTM
			, LS_CMENO
			, AMNNO
			, MODL_NO
			, FED_SPY_YN
			, BRCL_ISP_RZT_C 
			, BDLN_VAL 
			, BDHT_VAL 
		FROM TB_LA_IS_MH_SOG_COW
		WHERE  NA_BZPLC          = #{ss_na_bzplc}			/* 경제통합사업장코드			*/        
		AND  AUC_OBJ_DSC     = #{auc_obj_dsc}				/* 경매대상구분코드			*/
		AND  AUC_DT          = #{auc_dt}					/* 경매일자				*/
		AND  OSLP_NO         = #{oslp_no}					/* 원표번호				*/ 
	</select>

	<!-- 출장내역 등록 -->
	<insert id="LALM1004_insSogCow">
		<selectKey keyProperty="auc_prg_sq" resultType="String" order="BEFORE">
			SELECT NVL(#{auc_prg_sq}, NVL(MAX(AUC_PRG_SQ) + 1, 1)) AS AUC_PRG_SQ
			  FROM TB_LA_IS_MH_SOG_COW
			 WHERE NA_BZPLC = #{ss_na_bzplc}
			   AND AUC_DT = #{auc_dt}
			   AND AUC_OBJ_DSC = #{auc_obj_dsc}
		</selectKey>
		INSERT  INTO TB_LA_IS_MH_SOG_COW (
			NA_BZPLC                                 	/* 경제통합사업장코드         */
			, AUC_OBJ_DSC                            	/* 경매대상구분코드           */
			, AUC_DT                                 	/* 경매일자                   */
			, OSLP_NO                                	/* 원표번호                   */
			, LED_SQNO                               	/* 원장일련번호               */
			, FHS_ID_NO                              	/* 농가식별번호               */
			, FARM_AMNNO                             	/* 농장관리번호               */
			, SOG_NA_TRPL_C                          	/* 출하경제통합거래처코드     */
			, VHC_SHRT_C                             	/* 차량단축코드               */
			, RC_DT                                  	/* 접수일자                   */
			, TRMN_AMNNO                             	/* 거래인관리번호             */
			, LVST_AUC_PTC_MN_NO                     	/* 가축경매참여자번호         */
			, SRA_SRS_DSC                            	/* 축산축종구분코드           */
			, SRA_INDV_AMNNO                         	/* 축산개체관리번호           */
			, COW_SOG_WT                             	/* 우출하중량                 */
			, FIR_LOWS_SBID_LMT_AM                   	/* 최초최저낙찰한도금액       */
			, LOWS_SBID_LMT_AM                       	/* 최저낙찰한도금액           */
			, SRA_SBID_UPR                           	/* 축산낙찰단가               */
			, SRA_SBID_AM                            	/* 축산낙찰금액               */
			, SEL_STS_DSC                            	/* 판매상태구분코드           */
			, BRCL_ISP_CTFW_SMT_YN                   	/* 브루셀라검사증명서제출여부 */
			, BRCL_ISP_DT                            	/* 브루셀라검사일자           */
			, BRCL_ISP_RZT_C
			, LWPR_CHG_NT                            	/* 최저가변경횟수             */
			, VACN_DT                                	/* 예방접종일자               */
			, VACN_ORDER								/* 예방접종일자               */
			, LVST_MKT_TRPL_AMNNO                    	/* 가축시장거래처관리번호     */
			, MT12_OVR_YN                            	/* 12개월이상여부             */
			, PPGCOW_FEE_DSC                         	/* 번식우수수료구분코드       */
			, PRNY_JUG_YN                            	/* 임신감정여부               */
			, PRNY_YN                                	/* 임신여부                   */
			, NCSS_JUG_YN                            	/* 괴사감정여부               */
			, NCSS_YN                                	/* 괴사여부                   */
			, TRPCS_PY_YN                            	/* 운송비지급여부             */
			, SRA_TRPCS                              	/* 축산운송비                 */
			, SRA_PYIVA                              	/* 축산납입출자금             */
			, SRA_FED_SPY_AM                         	/* 축산사료공급금액           */
			, TD_RC_CST                              	/* 당일접수비용               */
			, MT12_OVR_FEE                           	/* 12개월이상수수료           */
			, AFISM_MOD_DT                           	/* 인공수정일자               */
			, PRNY_MTCN                              	/* 임신개월수                 */
			, AFISM_MOD_CTFW_SMT_YN                  	/* 인공수정증명서제출여부     */
			, RMHN_YN                                	/* 제각여부                   */
			, SRA_PDMNM                              	/* 축산생산자명               */
			, SRA_PD_RGNNM                           	/* 축산생산지역명             */
			, RMK_CNTN                               	/* 비고내용                   */
			, AUC_PRG_SQ                             	/* 경매진행순서               */
			, DEL_YN                                 	/* 삭제여부                   */
			, TMS_YN                                 	/* 전송여부                   */
			, MOD_KPN_NO	                      		/* 수정kpn			        */
			, SOGMN_C                                	/* 생산자                     */
			, DDL_QCN		                          	/* 마감차수(일괄경매 진행차수)*/
			, FSRG_DTM                               	/* 최초등록일시               */
			, FSRGMN_ENO                             	/* 최초등록자개인번호         */
			, LSCHG_DTM                              	/* 최종변경일시               */
			, LS_CMENO                               	/* 최종변경자개인번호         */
			, FEE_CHK_YN                             	/* 출하수수료수기적용여부     */
			, BLOOD_AM                               	/* 송아지혈통수수료           */
			, SELFEE_CHK_YN                          	/* 판매수수료수기적용여부     */
			, FEE_CHK_YN_FEE                         	/* 출하수수료수기등록         */
			, SELFEE_CHK_YN_FEE                      	/* 판매수수료수기등록         */
			, DNA_YN                                 	/* 친자확인여부               */
			, BRANDNM                                	/* 출장우브랜드명(춘천)       */
			, PDA_ID                                 	/* 산정위 PDA_ID              */
			, DNA_YN_CHK                             	/* 친자검사여부               */
			, BOVINE_DT                              	/* 우결핵검사일               */
			, BOVINE_RSLTNM
			, RE_PRODUCT_1                             /* 유전능력 냉도체중                      */
			, RE_PRODUCT_1_1                           /* 유전능력 냉도체중 등급                 */
			, RE_PRODUCT_2                             /* 유전능력 배최장근단면적                */
			, RE_PRODUCT_2_1                           /* 유전능력 배최장근단면적 등급           */
			, RE_PRODUCT_3                             /* 유전능력 등지방두께                    */
			, RE_PRODUCT_3_1                           /* 유전능력 등지방두께 등급               */
			, RE_PRODUCT_4                             /* 유전능력 근내지방도                    */
			, RE_PRODUCT_4_1                           /* 유전능력 근내지방도 등급               */
			, EPD_YN                                   /* 고능력여부                             */
			, RE_PRODUCT_11                            /* 유전능력 냉도체중            - 모개체  */
			, RE_PRODUCT_11_1                          /* 유전능력 냉도체중 등급       - 모개체  */
			, RE_PRODUCT_12                            /* 유전능력 배최장근단면적      - 모개체  */
			, RE_PRODUCT_12_1                          /* 유전능력 배최장근단면적 등급 - 모개체  */
			, RE_PRODUCT_13                            /* 유전능력 등지방두께          - 모개체  */
			, RE_PRODUCT_13_1                          /* 유전능력 등지방두께 등급     - 모개체  */
			, RE_PRODUCT_14                            /* 유전능력 근내지방도          - 모개체  */
			, RE_PRODUCT_14_1                          /* 유전능력 근내지방도 등급     - 모개체  */
			, SPAY_YN                                  /* 난소적출 여부                          */
			, CASE_COW                                 /* 송아지 구분 코드*/
			, FED_SPY_YN                               /* 전이용사료여부              */
			, AMNNO                                    /* 정산자거래인번호                     */
			, MODL_NO                                  /* 거치대 번호 */
			, AUC_YN
			, BDLN_VAL 									/* 체장 */
			, BDHT_VAL									/* 체고 */
	)values(
			#{ss_na_bzplc}                        	    /* 경제통합사업장코드         */
			, #{auc_obj_dsc}             				/* 경매대상구분코드           */
			, #{auc_dt}              					/* 경매이월일자               */
			, #{oslp_no}                                /* 원표번호                   */
			, 1                                         /* 원장일련번호               */
			, #{fhs_id_no}               				/* 농가식별번호               */
			, #{farm_amnno}              				/* 농장관리번호               */
			, #{sog_na_trpl_c}           				/* 출하경제통합거래처코드     */
			, #{vhc_shrt_c}               				/* 차량단축코드               */
			, #{rc_dt}                    				/* 접수일자                   */
			, #{trmn_amnno}
			, #{lvst_auc_ptc_mn_no}
			, #{sra_srs_dsc}							/* 축산축종구분코드           */
			, #{re_indv_no}                   			/* 축산개체관리번호           */
			, #{cow_sog_wt}               				/* 우출하중량                 */
			, #{fir_lows_sbid_lmt_am}     				/* 최초최저낙찰한도금액       */
			, #{lows_sbid_lmt_am}         				/* 최저낙찰한도금액           */
			, #{sra_sbid_upr}             				/* 축산낙찰단가               */
			, #{sra_sbid_am}              				/* 축산낙찰금액               */
			, #{sel_sts_dsc}              				/* 판매상태구분코드           */
			, #{brcl_isp_ctfw_smt_yn}     				/* 브루셀라검사증명서제출여부 */
			, #{brcl_isp_dt}              				/* 브루셀라검사일자           */
			, #{brcl_isp_rzt_c}
			, #{lwpr_chg_nt}              				/* 최저가변경횟수             */
			, #{vacn_dt}                  				/* 예방접종일자               */
			, #{vacn_order}                  			/* 예방접종일자               */
			, #{lvst_mkt_trpl_amnno}
			, #{mt12_ovr_yn}              				/* 12개월이상여부             */
			, #{ppgcow_fee_dsc}           				/* 번식우수수료구분코드       */
			, #{prny_jug_yn}              				/* 임신감정여부               */
			, #{prny_yn}                  				/* 임신여부                   */
			, #{ncss_jug_yn}              				/* 괴사감정여부               */
			, #{ncss_yn}                  				/* 괴사여부                   */
			, #{trpcs_py_yn}              				/* 운송비지급여부             */
			, #{sra_trpcs}                				/* 축산운송비                 */
			, #{sra_pyiva}                				/* 축산납입출자금             */
			, #{sra_fed_spy_am}           				/* 축산사료공급금액           */
			, #{td_rc_cst}                				/* 당일접수비용               */
			, #{mt12_ovr_fee}             				/* 12개월이상수수료           */
			, #{afism_mod_dt}             				/* 인공수정일자               */
			, #{prny_mtcn}                				/* 임신개월수                 */
			, #{afism_mod_ctfw_smt_yn}    				/* 인공수정증명서제출여부     */
			, #{rmhn_yn}                  				/* 제각여부                   */
			, #{sra_pdmnm}                				/* 축산생산자명               */
			, #{sra_pd_rgnnm}             				/* 축산생산지역명             */
			, #{rmk_cntn}                 				/* 비고내용                   */
			, #{auc_prg_sq}               	            /* 경매진행순서               */
			, '0'                                       /* 삭제여부                   */
			, '0'                                       /* 전송여부                   */
			, #{mod_kpn_no}	            			    /* 수정kpn                    */
			, #{sogmn_c}                  				/* 생산자                     */
			, ''								        /* 마감차수(일괄경매 진행차수)*/
			, SYSDATE                                	/* 최초등록일시               */
			, #{ss_userid}                              /* 최초등록자개인번호         */
			, SYSDATE                                	/* 최종변경일시               */
			, #{ss_userid}                              /* 최종변경자개인번호         */
			, #{fee_chk_yn}               				/* 출하수수료수기적용여부     */
			, #{blood_am}                 				/* 송아지혈통수수료		      */
			, #{selfee_chk_yn}            				/* 판매수수료수기적용여부     */
			, #{fee_chk_yn_fee}           				/* 출하수수료수기등록         */
			, #{selfee_chk_yn_fee}        				/* 판매수수료수기등록         */
			, NVL(#{dna_yn}, '3')
			, #{brandnm}                  				/* 출장우브랜드명(춘천)       */
			, #{pda_id}                   				/* 산정위 PDA_ID              */
			, #{dna_yn_chk}               				/* 친자검사여부               */
			, #{bovine_dt}                				/* 우결핵검사일               */
			, #{bovine_rsltnm}
			, #{re_product_1}                           /* 유전능력 냉도체중                      */
			, #{re_product_1_1}                         /* 유전능력 냉도체중 등급                 */
			, #{re_product_2}                           /* 유전능력 배최장근단면적                */
			, #{re_product_2_1}                         /* 유전능력 배최장근단면적 등급           */
			, #{re_product_3}                           /* 유전능력 등지방두께                    */
			, #{re_product_3_1}                         /* 유전능력 등지방두께 등급               */
			, #{re_product_4}                           /* 유전능력 근내지방도                    */
			, #{re_product_4_1}                         /* 유전능력 근내지방도 등급               */
			, #{epd_yn}                                 /* 고능력여부                             */
			, #{re_product_11}                          /* 유전능력 냉도체중            - 모개체  */
			, #{re_product_11_1}                        /* 유전능력 냉도체중 등급       - 모개체  */
			, #{re_product_12}                          /* 유전능력 배최장근단면적      - 모개체  */
			, #{re_product_12_1}                        /* 유전능력 배최장근단면적 등급 - 모개체  */
			, #{re_product_13}                          /* 유전능력 등지방두께          - 모개체  */
			, #{re_product_13_1}                        /* 유전능력 등지방두께 등급     - 모개체  */
			, #{re_product_14}                          /* 유전능력 근내지방도          - 모개체  */
			, #{re_product_14_1}                        /* 유전능력 근내지방도 등급     - 모개체  */
			, #{spay_yn}                                /* 난소적출 여부                          */
			, #{case_cow}                               /* 송아지 구분 코드*/
			, #{fed_spy_yn}             				/* 전이용사료여부                */
			, #{amnno}
			, NVL(#{modl_no}, #{auc_prg_sq})            /* 거치대 번호 */
			, NVL(#{auc_yn}, '0')
			, #{bdln_val} 
			, #{bdht_val}
	)
	</insert>

	<!-- 출장 개체 등록 -->
	<insert id="LALM1004_insMmIndv">
		<selectKey keyProperty="re_indv_no" resultType="string" order="BEFORE">
			SELECT NVL(#{sra_srs_dsc}, '99')||TO_CHAR(SYSDATE, 'YYYYMMDD')||LPAD(NVL(MAX(TO_NUMBER(SUBSTR(SRA_INDV_AMNNO, -5))) + 1, 1), 5, '0')
			  FROM TB_LA_IS_MM_INDV
			 WHERE NA_BZPLC = #{ss_na_bzplc}
			   AND SRA_SRS_DSC = NVL(#{sra_srs_dsc}, '99')
			   AND SRA_INDV_AMNNO LIKE NVL(#{sra_srs_dsc}, '99')||TO_CHAR(SYSDATE, 'YYYYMMDD')||'%'
		</selectKey>
		INSERT INTO TB_LA_IS_MM_INDV (
			NA_BZPLC                                               /* 경제통합사업장코드                  */
			, SRA_INDV_AMNNO                                       /* 축산개체관리번호                    */
			, SRA_SRS_DSC                                          /* 축산축종구분코드                    */
			, FHS_ID_NO                                            /* 농가식별번호                        */
			, FARM_AMNNO                                           /* 농장관리번호                        */
			, BIRTH                                                /* 생년월일                            */
			, MCOW_DSC                                             /* 어미구분코드                        */
			, KPN_NO		                                       /* KPN번호                             */
			, INDV_SEX_C                                           /* 개체성별코드                        */
			, MCOW_SRA_INDV_AMNNO                                  /* 어미소축산개체관리번호              */
			, MATIME                                               /* 산차                                */
			, SRA_INDV_PASG_QCN                                    /* 축산개체계대차수                    */
			, INDV_ID_NO                                           /* 개체식별번호                        */
			, SRA_INDV_BRDSRA_RG_NO                                /* 축산개체종축등록번호                */
			, RG_DSC                                               /* 등록구분코드                        */
			, ANW_YN                                               /* 한우종합등록여부                    */
			, FSRG_DTM                                             /* 최초등록일시                        */
			, FSRGMN_ENO                                           /* 최초등록자개인번호                  */
			, LSCHG_DTM                                            /* 최종변경일시                        */
			, LS_CMENO                                             /* 최종변경자개인번호                  */
		) VALUES (
			#{ss_na_bzplc}										    /* 경제통합사업장코드                  */
			, #{re_indv_no}											/* 축산개체관리번호                    */
			, #{sra_srs_dsc}										/* 축산축종구분코드                    */
			, #{fhs_id_no}											/* 농가식별번호                        */
			, #{farm_amnno}											/* 농장관리번호                        */
			, #{birth}
			, #{mcow_dsc}											/* 어미구분코드                        */
			, #{kpn_no}												/* KPN번호                             */
			, #{indv_sex_c}											/* 개체성별코드                        */
			, #{mcow_sra_indv_amnno}								/* 어미소축산개체관리번호              */
			, #{matime}
			, #{sra_indv_pasg_qcn}									/* 축산개체계대차수                    */
			, #{indv_id_no}											/* 개체식별번호                        */
			, #{sra_indv_brdsra_rg_no}								/* 축산개체종축등록번호                */
			, #{rg_dsc}												/* 등록구분코드                        */
			, '9'													/* 한우종합등록여부                    */
			, SYSDATE												/* 최초등록일시                        */
			, #{ss_userid}											/* 최초등록자개인번호                  */
			, SYSDATE												/* 최종변경일시                        */
			, #{ss_userid}											/* 최종변경자개인번호                  */
		)
	</insert>

	<!-- 수수료 정보 저장 -->
	<insert id="LALM1004_insMhFeeImps">
		INSERT INTO TB_LA_IS_MH_FEE_IMPS (
			NA_BZPLC                        /* 경제통합사업장코드                */
			, AUC_OBJ_DSC                   /* 경매대상구분코드                  */
			, AUC_DT                        /* 경매일자                          */
			, OSLP_NO                       /* 원표번호                          */
			, LED_SQNO                      /* 원장일련번호                      */
			, FEE_RG_SQNO                   /* 수수료등록일련번호                */
			, NA_FEE_C                      /* 경제통합수수료코드                */
			, APL_DT                        /* 적용일자                          */
			, FEE_APL_OBJ_C                 /* 수수료적용대상코드                */
			, ANS_DSC                       /* 가감구분코드                      */
			, SBID_YN                       /* 낙찰여부                          */
			, SRA_TR_FEE                    /* 축산거래수수료                    */
			, TMS_YN                        /* 전송여부                          */
		) VALUES (
			#{ss_na_bzplc}                  /* 경제통합사업장코드                */
			, #{auc_obj_dsc}                /* 경매대상구분코드                  */
			, #{auc_dt}                     /* 경매일자                          */
			, #{v_oslp_no}                  /* 원표번호                          */
			, 1                             /* 원장일련번호                      */
			, #{fee_rg_sqno}                /* 수수료등록일련번호                */
			, #{na_fee_c}                   /* 경제통합수수료코드                */
			, #{apl_dt}                     /* 적용일자                          */
			, #{fee_apl_obj_c}              /* 수수료적용대상코드                */
			, #{ans_dsc}                    /* 가감구분코드                      */
			, #{sbid_yn}                    /* 낙찰여부                          */
			, #{sra_tr_fee}                 /* 축산거래수수료                    */
			, '0'                           /* 전송여부                          */
		)
	</insert>

	<!-- 출하주 정보 수정 (조합원/비조합원, 관내/관외)-->
	<update id="LALM1004_updMmFhs">
		UPDATE TB_LA_IS_MM_FHS
		   SET  MACO_YN       =  #{io_sogmn_maco_yn}
			 ,  JRDWO_DSC     =  #{jrdwo_dsc}
			 ,  VACN_DT       =  #{vacn_dt}
			 ,  LSCHG_DTM     =  SYSDATE
			 ,  LS_CMENO      =  #{ss_userid}
		 WHERE  NA_BZPLC      =  #{ss_na_bzplc}
		   AND  FHS_ID_NO     =  #{fhs_id_no}
		   AND  FARM_AMNNO    =  #{farm_amnno}
	</update>

	<!-- 개체 정보 수정 -->
	<update id="LALM1004_updMnIndv">
		UPDATE TB_LA_IS_MM_INDV SET
			KPN_NO                  =  #{kpn_no}
			, FHS_ID_NO 	        =  #{fhs_id_no}
			, FARM_AMNNO 	        =  #{farm_amnno}
			, INDV_SEX_C            =  #{indv_sex_c}
			, BIRTH                 =  #{birth}
			, INDV_ID_NO            =  #{indv_id_no}
			, SRA_INDV_BRDSRA_RG_NO =  #{sra_indv_brdsra_rg_no}
			, RG_DSC                =  #{rg_dsc}
			, MCOW_DSC              =  #{mcow_dsc}
			, MCOW_SRA_INDV_AMNNO   =  #{mcow_sra_indv_amnno}
			, MATIME                =  #{matime}
			, SRA_INDV_PASG_QCN     =  #{sra_indv_pasg_qcn}
		WHERE NA_BZPLC              =  #{ss_na_bzplc}
			AND SRA_INDV_AMNNO      =  #{re_indv_no}
			AND SRA_SRS_DSC         =  #{sra_srs_dsc}
	</update>

	<!-- 출장내역 삭제 -->
	<delete id="LALM1004_delSogCow">
		DELETE FROM TB_LA_IS_MH_SOG_COW
		WHERE  NA_BZPLC      = #{ss_na_bzplc}				/* 경제통합사업장코드			*/        
		AND  AUC_OBJ_DSC     = #{auc_obj_dsc}			/* 경매대상구분코드			*/
		AND  AUC_DT          = #{auc_dt}					/* 경매일자				*/
		AND  OSLP_NO         = #{oslp_no}					/* 원표번호				*/ 
	</delete>

	<!-- 수수료 삭제 -->
	<delete id="LALM1004_delFeeImps">
		DELETE FROM TB_LA_IS_MH_FEE_IMPS
		WHERE  NA_BZPLC      = #{ss_na_bzplc}				/* 경제통합사업장코드	*/
		AND  AUC_OBJ_DSC     = #{auc_obj_dsc}				/* 경매대상구분코드			*/
		AND  AUC_DT          = #{auc_dt}					/* 경매일자				*/
		AND  OSLP_NO         = #{oslp_no}					/* 원표번호				*/  
	</delete>

</mapper>




		









